setopt APPEND_HISTORY
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_IGNORE_SPACE
setopt SHARE_HISTORY
setopt HIST_VERIFY

setopt AUTO_CD
setopt AUTO_PUSHD

setopt AUTO_MENU
setopt GLOB_COMPLETE
setopt LIST_ROWS_FIRST

source "${ZINIT[BIN_DIR]}/zinit.zsh"

zinit ice blockf atpull'zinit creinstall -q .'
zinit light zsh-users/zsh-completions

zinit ice as"completion"
zinit snippet https://raw.githubusercontent.com/docker/compose/master/contrib/completion/zsh/_docker-compose

zinit light zsh-users/zsh-autosuggestions

zinit ice \
  atclone'dircolors -b LS_COLORS > clrs.zsh' \
  atpull'%atclone' pick"clrs.zsh" nocompile'!' \
  atload'zstyle ":completion:*" list-colors "${(s.:.)LS_COLORS}"'
zinit light trapd00r/LS_COLORS
zinit light zpm-zsh/ls
zinit light zpm-zsh/colorize
zinit light ael-code/zsh-colored-man-pages
zinit light zdharma/fast-syntax-highlighting

zinit light lukechilds/zsh-nvm

autoload -Uz compinit

zstyle ':completion:*' menu select=2
zstyle ':completion:*' group-name ''
zstyle ':completion:::::' completer _expand _expand_alias _complete _ignored _correct _approximate
zstyle ':completion:*' squeeze-slashes true

zstyle ':completion:*:functions' ignored-patterns '_*'
zstyle '*' single-ignored 'show'

zstyle ':completion:*' accept-exact '*(N)'
zstyle ':completion:*' use-cache on
zstyle ':completion:*' cache-path "$ZSH_CACHE_DIR/zcompcache"

zstyle ':completion:*:corrections' format '%B%d%b (%e errors)'
zstyle ':completion:*:descriptions' format '%B%d%b'
zstyle ':completion:*:messages' format '%B%F{yellow}%d%f%b'
zstyle ':completion:*:warnings' format '%B%F{red}No matches found!%f%b'

for compdump in $ZINIT[ZCOMPDUMP_PATH](N.mh+24); do
  compinit -d "$compdump"
done
compinit -C -d "$ZINIT[ZCOMPDUMP_PATH]"

zinit cdreplay -q

autoload -U up-line-or-beginning-search
autoload -U down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
bindkey "$key[Up]" up-line-or-beginning-search
bindkey "$key[Down]" down-line-or-beginning-search

export GPG_TTY=$(tty)

export STARSHIP_CONFIG=~/.config/starship/config.toml
eval "$(starship init zsh)"
